# apache.conf - дополнительные настройки Apache
<Directory /var/www/html>
    Options -Indexes -Includes +FollowSymLinks
    AllowOverride All
    Require all granted
    
    # Блокируем доступ к конфиденциальным файлам
    <FilesMatch "\.(env|config|ini|log|sql|bak)$">
        Require all denied
    </FilesMatch>
    
    # Блокируем доступ к .git
    RedirectMatch 404 /\.git
</Directory>

# Настраиваем логирование
ErrorLog /var/log/apache2/error.log
CustomLog /var/log/apache2/access.log combined

# Безопасные заголовки
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-Frame-Options "DENY"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Отключаем ненужные методы HTTP
<LimitExcept GET POST>
    Require all denied
</LimitExcept>